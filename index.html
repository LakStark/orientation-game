<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Responsive Mario-style Quiz Game</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
<style>
    html, body { margin: 0; padding: 0; overflow: hidden; height: 100%; width: 100%; background: #000; }
    .overlay {
        position: absolute; left: 50%; transform: translateX(-50%); width: 90%; max-width: 450px;
        padding: 20px; background: rgba(0,0,0,0.9); color: #fff; display: none;
        font-family: Arial, sans-serif; border-radius: 10px; text-align: center; z-index: 10;
        box-sizing: border-box; border: 1px solid #444;
    }
    #quiz-container { top: 20%; }
    #gameOver { top: 40%; }
    #scorecard-container { top: 10%; max-height: 80%; overflow-y: auto; }
    
    .overlay h2 { margin-top: 0; }
    .overlay button {
        margin-top: 10px; padding: 12px 24px; background: #555; color: #fff;
        border: none; border-radius: 6px; cursor: pointer; font-size: 18px;
    }
    #startOver, #play-again { background: #007bff; }
    #quiz-options button { width: 100%; margin: 8px auto; background: #333; }
    #quiz-timer { margin-top: 10px; font-weight: 700; }

    #scorecard-results ul { list-style-type: none; padding: 0; text-align: left; }
    #scorecard-results li {
        background: #2a2a2a; padding: 10px; margin-bottom: 8px; border-radius: 5px;
        border-left: 5px solid #ff4747;
    }
    #scorecard-results li.correct { border-left-color: #7CFC00; }
</style>
</head>
<body>

<div id="quiz-container" class="overlay">
  <div id="quiz-question"></div>
  <div id="quiz-options"></div>
  <div id="quiz-timer"></div>
</div>

<div id="gameOver" class="overlay">
  <h2>Game Over</h2>
  <button id="startOver">Start Over</button>
</div>

<div id="scorecard-container" class="overlay">
    <h2>Quiz Results</h2>
    <h3 id="scorecard-final-score"></h3>
    <div id="scorecard-results"></div>
    <button id="play-again">Play Again</button>
</div>

<script>
/* ---------------- LEVEL + QUESTIONS DATA ---------------- */
const platformData = [
  {x:200,y:500},{x:500,y:450},{x:800,y:500},{x:1100,y:400},{x:1400,y:450},{x:1700,y:500},
  {x:2000,y:400},{x:2300,y:450},{x:2600,y:500},{x:2900,y:400},{x:3200,y:350},{x:3500,y:400},
  {x:3800,y:500},{x:4100,y:450},{x:4400,y:400},{x:4700,y:350}
];
const brickData = [
  {x:200,y:350},{x:500,y:300},{x:800,y:350},{x:1100,y:250},{x:1400,y:300},{x:1700,y:350},
  {x:2000,y:250},{x:2300,y:300},{x:2600,y:350},{x:2900,y:250},{x:3200,y:200},{x:3500,y:250},
  {x:3800,y:350},{x:4100,y:300},{x:4400,y:250}
];
const enemyData = [
  {x:800,y:450,minX:650,maxX:950,isQuestionEnemy:false},
  {x:1400,y:400,minX:1250,maxX:1550,isQuestionEnemy:true},
  {x:2000,y:350,minX:1850,maxX:2150,isQuestionEnemy:false},
  {x:2600,y:450,minX:2450,maxX:2750,isQuestionEnemy:true},
  {x:3500,y:350,minX:3350,maxX:3650,isQuestionEnemy:false},
  {x:4100,y:400,minX:3950,maxX:4250,isQuestionEnemy:false}
];
const spikeData=[{x:1800,y:480},{x:3600,y:480}];
const lavaData={x:2100,y:480};
const bossData={x:4650,y:260};

const questions = [
  {q:"Who is known as the Father of Python?",opts:["James Gosling","Guido van Rossum","Dennis Ritchie","Bjarne Stroustrup"],a:1},
  {q:"Which is not a Python keyword?",opts:["pass","yield","var","global"],a:2},
  {q:"Who is the father of AI?",opts:["Einstein","McCarthy","Turing","Minsky"],a:1}
];
const finalQuestion={q:"What is the full form of IEEE?",opts:["International Electrical and Electronics Engineers","Institute of Electrical and Electronics Engineers","International Energy and Environment Engineers","Institute of Electronic Engineering Experts"],a:1};

/* ---------------- GAME SCENE ---------------- */
class MyGame extends Phaser.Scene {
  constructor(){ super("MyGame"); }
  preload(){
    this.load.image("player","https://labs.phaser.io/assets/sprites/phaser-dude.png");
    this.load.image("ground","https://labs.phaser.io/assets/sprites/platform.png");
    this.load.image("enemy","https://labs.phaser.io/assets/sprites/space-baddie.png");
    this.load.image("bullet","https://labs.phaser.io/assets/sprites/bullet.png");
    this.load.image("spike","https://labs.phaser.io/assets/sprites/spike.png");
    this.load.image("lava","https://labs.phaser.io/assets/sprites/red.png");
    this.load.image("boss","https://labs.phaser.io/assets/sprites/metalslug_monster.png");
  }
  create(){
    this.baseWidth=800; this.baseHeight=600; this.worldWidth=5000;
    this.scaleX=1; this.scaleY=1; this.score=0; this.gameOver=false;

    this.lavaFloor=this.add.tileSprite(0,this.baseHeight-20,this.worldWidth,120,"lava").setOrigin(0,0);
    this.physics.add.existing(this.lavaFloor,true);

    this.platforms=this.physics.add.staticGroup();
    platformData.forEach(p=>this.platforms.create(p.x,p.y,"ground"));

    this.player=this.physics.add.sprite(100,450,"player").setCollideWorldBounds(true);
    this.physics.add.collider(this.player,this.platforms);
    this.physics.add.overlap(this.player,this.lavaFloor,()=>{if(!this.gameOver)this.playerDies();});

    this.cursors=this.input.keyboard.createCursorKeys();
    this.cameras.main.startFollow(this.player,true,0.08,0.08);
    this.scale.on("resize",this.handleResize,this);
    this.handleResize({width:this.scale.width,height:this.scale.height});
  }
  update(){
    if(this.gameOver) return;
    const speed=160*this.scaleX;
    if(this.cursors.left.isDown) this.player.setVelocityX(-speed);
    else if(this.cursors.right.isDown) this.player.setVelocityX(speed);
    else this.player.setVelocityX(0);
    if(this.cursors.up.isDown && this.player.body.touching.down)
      this.player.setVelocityY(-380*this.scaleY);
  }
  playerDies(){
    this.gameOver=true;
    document.getElementById("gameOver").style.display="block";
  }
  handleResize(gameSize){
    const {width,height}=gameSize;
    this.scaleX=width/this.baseWidth; this.scaleY=height/this.baseHeight;
    const scaledWorldWidth=this.worldWidth*this.scaleX;
    const scaledWorldHeight=this.baseHeight*this.scaleY;
    this.physics.world.setBounds(0,0,scaledWorldWidth,scaledWorldHeight);
    this.cameras.main.setBounds(0,0,scaledWorldWidth,scaledWorldHeight);
    if(this.lavaFloor){
      this.lavaFloor.setPosition(0,scaledWorldHeight-20);
      this.lavaFloor.setSize(scaledWorldWidth,120*this.scaleY);
    }
    if(this.player) this.player.setScale(Math.min(this.scaleX,this.scaleY));
  }
}

/* ---------------- GAME CONFIG ---------------- */
new Phaser.Game({
  type:Phaser.AUTO,
  width:window.innerWidth,
  height:window.innerHeight,
  physics:{ default:"arcade", arcade:{gravity:{y:600}, debug:false} },
  scene:MyGame
});
</script>
</body>
</html>
